/* SYP Analytics - Styles
   Original CSS + UI/UX Improvements */

/* ===== RESET & VARIABLES ===== */
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0d1117;--panel:#161b22;--panel-alt:#21262d;
  --border:#30363d;--border-light:#484f58;
  --accent:#00ff88;--warn:#f0883e;--negative:#ff4444;
  --positive:#00ff88;--info:#58a6ff;
  --text:#f0f6fc;--muted:#8b949e;
  --card:#161b22;
  --buy:#00ff88;--sell:#ff6b6b;
  --radius:4px;
  --sidebar-width:200px;
}

/* Light theme support */
[data-theme="light"]{
  --bg:#f5f7fa;--panel:#ffffff;--panel-alt:#f0f2f5;
  --border:#d1d9e6;--border-light:#b8c4d4;
  --accent:#00cc6a;--warn:#e67e22;--negative:#e74c3c;
  --positive:#00cc6a;--info:#2980b9;
  --text:#1a1a2e;--muted:#6c7a8a;
  --card:#ffffff;
}

@keyframes fadeIn{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeInView{from{opacity:0}to{opacity:1}}
@keyframes slideIn{from{transform:translateX(-10px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}
@keyframes spin{to{transform:rotate(360deg)}}
.spinner{width:24px;height:24px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .6s linear infinite}

/* ===== TYPOGRAPHY ===== */
body{font-family:'JetBrains Mono','SF Mono','Consolas',monospace;font-size:11px;background:var(--bg);color:var(--text);overflow:hidden;height:100vh}
.mono{font-family:'JetBrains Mono','SF Mono','Consolas',monospace}
td,.kpi-value,.mkt-row .price,.quote-table td,.quote-output-table td,code,pre,.output-preview{font-family:'JetBrains Mono','SF Mono','Consolas',monospace;font-size:11px}
.header h1{font-size:20px;font-weight:700}
.card-title{font-size:13px}

/* ===== LAYOUT ===== */
#app{display:flex;height:100vh}
.sidebar{width:var(--sidebar-width);background:var(--panel);border-right:1px solid var(--border);display:flex;flex-direction:column;transition:width 0.2s ease}

.sidebar-header{padding:20px 16px 16px;border-bottom:1px solid var(--border)}
.logo{background:linear-gradient(135deg,var(--accent),#00cc66);padding:10px;font-weight:700;font-size:14px;color:var(--bg);text-align:center;border-radius:var(--radius)}
.company{color:var(--muted);font-size:10px;text-align:center;margin-top:8px}

/* Sidebar Toggle */

/* Theme Toggle */
.theme-toggle{background:none;border:1px solid var(--border);color:var(--muted);cursor:pointer;font-size:14px;padding:4px 8px;border-radius:var(--radius);margin-top:8px;width:100%;text-align:center}
.theme-toggle:hover{background:var(--border);color:var(--text)}

/* Nav Groups */
.nav{flex:1;padding:8px;overflow-y:auto}
.nav-group-label{padding:8px 12px 4px;font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px;font-weight:600}
.nav-item{width:100%;padding:10px 12px;margin-bottom:2px;background:0;border:0;border-radius:var(--radius);color:var(--muted);cursor:pointer;text-align:left;font-size:11px;font-family:inherit;display:flex;align-items:center;gap:10px;transition:all 0.15s ease}
.nav-item:hover{background:var(--border);color:var(--text)}
.nav-item.active{background:var(--border);color:var(--accent)}

.sidebar-footer{padding:12px;border-top:1px solid var(--border)}
.mkt-label{color:var(--muted);font-size:10px;margin-bottom:6px}
.mkt-row{display:flex;justify-content:space-between;font-size:11px;margin-bottom:2px}
.mkt-row .price{font-weight:600}
.mkt-row.west .price{color:var(--accent)}
.mkt-row.central .price{color:var(--warn)}
.mkt-row.east .price{color:var(--info)}
.mkt-date{color:var(--muted);font-size:9px;margin-top:4px}

/* ===== MAIN CONTENT ===== */
.main{flex:1;display:flex;flex-direction:column;overflow:hidden}
.header{padding:12px 20px;border-bottom:1px solid var(--border);background:var(--panel);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
.header-left{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
.header h1{font-size:16px;font-weight:600}
.filters{display:flex;gap:8px}
.header-right{display:flex;gap:8px}

/* Breadcrumbs */
.breadcrumbs{padding:8px 20px;font-size:10px;color:var(--muted);border-bottom:1px solid var(--border);background:var(--panel-alt)}
.breadcrumbs a{color:var(--accent);text-decoration:none;cursor:pointer}
.breadcrumbs a:hover{text-decoration:underline}
.breadcrumbs .separator{margin:0 6px;opacity:0.5}

/* Content transitions */
.content{flex:1;overflow:auto;padding:20px;transition:opacity 150ms ease}
.content.fading{opacity:0}
.content.fade-in{animation:fadeInView 0.2s ease}

/* ===== FORMS ===== */
select,input[type="text"],input[type="number"],input[type="date"],input[type="password"],textarea{padding:8px 10px;background:var(--border);border:1px solid var(--border-light);color:var(--text);font-size:11px;font-family:inherit;border-radius:var(--radius);transition:border-color 0.15s ease}
select:focus,input:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(0,255,136,0.15)}

/* ===== BUTTONS ===== */
.btn{padding:8px 16px;border:none;font-size:11px;font-weight:600;font-family:inherit;cursor:pointer;border-radius:var(--radius);transition:all 0.15s ease}
.btn-default{background:var(--border);color:var(--text);border:1px solid var(--border-light)}
.btn-primary{background:var(--accent);color:var(--bg)}
.btn-success{background:var(--positive);color:#fff}
.btn-danger{background:transparent;color:var(--negative);border:1px solid var(--negative)}
.btn-warn{background:var(--warn);color:var(--bg)}
.btn-info{background:var(--info);color:var(--bg)}
.btn-sm{padding:4px 10px;font-size:10px}
.btn:hover{filter:brightness(1.1);transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}

/* ===== CARDS ===== */
.card{background:var(--panel);border:1px solid var(--border);margin-bottom:16px;border-radius:var(--radius)}
.card-header{padding:12px 16px;background:var(--panel-alt);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;border-radius:var(--radius) var(--radius) 0 0}
.card-title{font-weight:600;font-size:11px;color:var(--accent)}
.card-title.positive{color:var(--positive)}
.card-title.warn{color:var(--warn)}
.card-title.negative{color:var(--negative)}
.card-title.info{color:var(--info)}
.card-body{padding:16px}

/* ===== KPI ===== */
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-bottom:20px}
.kpi{background:var(--panel);border:1px solid var(--border);padding:16px;border-radius:var(--radius)}
.kpi-label{color:var(--muted);font-size:10px;margin-bottom:6px}
.kpi-value{font-size:20px;font-weight:700;font-family:'SF Mono','Consolas',monospace}
.kpi-sub{color:var(--muted);font-size:11px;margin-left:8px}
.kpi-value.positive{color:var(--positive)}
.kpi-value.negative{color:var(--negative)}

/* ===== TABLES ===== */
table{width:100%;border-collapse:collapse}
th{padding:10px 12px;text-align:left;border-bottom:1px solid var(--border);color:var(--muted);font-size:10px;background:var(--panel-alt);position:sticky;top:0;z-index:1}
th.right{text-align:right}
th[onclick],th[style*="cursor"]{cursor:pointer}
th[onclick]:hover,th[style*="cursor"]:hover{color:var(--accent)}
td{padding:10px 12px;border-bottom:1px solid var(--border)}
tr:nth-child(even){background:var(--panel)}
tr:nth-child(odd){background:var(--bg)}
tr:hover{background:var(--panel-alt) !important}
td.right{text-align:right}
td.positive{color:var(--positive)}
td.negative{color:var(--negative)}
td.accent{color:var(--accent)}
td.warn{color:var(--warn)}
td.bold{font-weight:500}

/* Row hover actions */
tr .row-actions{opacity:0;transition:opacity 0.15s ease}
tr:hover .row-actions{opacity:1}

/* Table filter bar */
.table-filter-bar{display:flex;gap:8px;padding:8px 12px;background:var(--panel-alt);border-bottom:1px solid var(--border);flex-wrap:wrap;align-items:center}
.table-filter-bar input,.table-filter-bar select{padding:4px 8px;font-size:10px}

/* ===== BADGES ===== */
.badge{display:inline-block;padding:2px 8px;font-size:10px;border-radius:var(--radius)}
.badge-pending{background:rgba(245,166,35,0.2);color:var(--warn)}
.badge-success{background:rgba(34,197,94,0.2);color:var(--positive)}
.badge-info{background:rgba(59,130,246,0.2);color:var(--info)}
.badge-warn{background:rgba(245,166,35,0.2);color:var(--warn)}
.badge-danger{background:rgba(239,68,68,0.2);color:var(--negative)}

/* ===== MODALS ===== */
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn 0.15s ease}
.modal{background:var(--panel);border:1px solid var(--border);width:500px;max-height:90vh;display:flex;flex-direction:column;border-radius:var(--radius)}
.modal.wide{width:700px}
.modal-header{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;border-radius:var(--radius) var(--radius) 0 0}
.modal-title{font-weight:600;font-size:14px;color:var(--accent)}
.modal-title.positive{color:var(--positive)}
.modal-title.warn{color:var(--warn)}
.modal-close{background:none;border:none;color:var(--muted);font-size:20px;cursor:pointer;transition:color 0.15s ease}
.modal-close:hover{color:var(--text)}
.modal-body{padding:20px;overflow-y:auto;flex:1}
.modal-footer{padding:16px 20px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:12px;border-radius:0 0 var(--radius) var(--radius)}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.form-group{display:flex;flex-direction:column;gap:4px}
.form-group.full{grid-column:span 2}
.form-label{font-size:10px;color:var(--muted)}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
.grid-2-1{display:grid;grid-template-columns:2fr 1fr;gap:16px}

/* ===== CHARTS ===== */
.chart-container{height:160px;display:flex;align-items:flex-end;gap:8px;padding:10px 0}
.chart-bar-group{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px}
.chart-bars{display:flex;gap:2px;align-items:flex-end;height:120px}
.chart-bar{width:10px;border-radius:2px 2px 0 0;min-height:2px}
.chart-bar.west{background:var(--accent)}
.chart-bar.central{background:var(--warn)}
.chart-bar.east{background:var(--info)}
.chart-label{color:var(--muted);font-size:9px}
.chart-legend{display:flex;justify-content:center;gap:16px;margin-top:8px}
.legend-item{display:flex;align-items:center;gap:6px}
.legend-dot{width:10px;height:10px}
.legend-dot.west{background:var(--accent)}
.legend-dot.central{background:var(--warn)}
.legend-dot.east{background:var(--info)}
.legend-text{color:var(--muted);font-size:10px}

/* ===== PROGRESS ===== */
.progress-bar{height:6px;background:var(--border);border-radius:3px;overflow:hidden}
.progress-fill{height:100%;border-radius:3px;transition:width 0.3s ease}
.progress-fill.accent{background:var(--accent)}
.progress-fill.warn{background:var(--warn)}
.progress-fill.info{background:var(--info)}

/* ===== ACTIVITY ===== */
.activity-item{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.activity-main{font-weight:500}
.activity-sub{color:var(--muted);font-size:10px;margin-top:2px}
.activity-right{text-align:right}
.activity-value{font-weight:500}
.activity-value.positive{color:var(--positive)}
.activity-value.accent{color:var(--accent)}
.empty-state{padding:40px;text-align:center;color:var(--muted)}
.action-buttons{display:flex;gap:4px}

/* ===== AI CHAT ===== */
.ai-chat{display:flex;flex-direction:column;height:calc(100vh - 140px)}
.ai-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px}
.ai-msg{padding:12px 16px;border-radius:8px;max-width:85%;line-height:1.5}
.ai-msg.user{white-space:pre-wrap;background:var(--accent);color:var(--bg);align-self:flex-end}
.ai-msg.assistant{background:var(--panel-alt);border:1px solid var(--border);align-self:flex-start;white-space:normal}
.ai-msg.assistant pre{background:var(--bg);border:1px solid var(--border);border-radius:4px;padding:10px 12px;margin:8px 0;overflow-x:auto;white-space:pre-wrap;word-break:break-word;font-size:11px;line-height:1.4}
.ai-msg.assistant code{background:var(--bg);padding:1px 5px;border-radius:3px;font-size:11px;font-family:'Courier New',monospace}
.ai-msg.assistant pre code{background:none;padding:0}
.ai-msg.assistant strong{color:var(--accent);font-weight:700}
.ai-msg.assistant em{font-style:italic;color:var(--text)}
.ai-msg.assistant ul,.ai-msg.assistant ol{margin:6px 0;padding-left:20px}
.ai-msg.assistant li{margin:3px 0;line-height:1.5}
.ai-input-area{padding:16px;border-top:1px solid var(--border);display:flex;gap:8px}
.ai-input-area textarea{flex:1;resize:none;min-height:60px}

/* AI Side Panel */
.ai-sidepanel{width:320px;background:var(--panel);border-left:1px solid var(--border);display:flex;flex-direction:column;transition:width 0.2s ease}
.ai-sidepanel.collapsed{width:0;overflow:hidden;border:none}
.ai-toggle{position:fixed;bottom:80px;right:20px;width:48px;height:48px;border-radius:50%;background:var(--accent);color:var(--bg);border:none;font-size:20px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.3);z-index:100;transition:transform 0.2s ease}
.ai-toggle:hover{transform:scale(1.1)}
.ai-sidepanel-header{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.ai-sidepanel-title{font-weight:600;font-size:12px;color:var(--accent)}
.ai-sidepanel-close{background:none;border:none;color:var(--muted);cursor:pointer;font-size:16px}
.ai-sidepanel-close:hover{color:var(--text)}
.ai-sidepanel .ai-messages{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
.ai-sidepanel .ai-msg{padding:10px 12px;border-radius:6px;max-width:95%;font-size:11px}
.ai-sidepanel .ai-input-area{padding:12px;border-top:1px solid var(--border);display:flex;gap:6px;flex-direction:column}
.ai-sidepanel .ai-input-area textarea{resize:none;min-height:50px;font-size:11px}

/* ===== PARSED PREVIEW ===== */
.parsed-preview{background:var(--bg);border:1px solid var(--border);padding:12px;margin-top:12px;max-height:300px;overflow:auto;border-radius:var(--radius)}
.parsed-row{display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid var(--border)}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:8px;height:8px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:var(--border-light)}

/* ===== QUOTE ENGINE ===== */
.quote-grid{display:grid;grid-template-columns:1fr 380px;gap:16px}
.quote-mode-toggle{display:flex;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:16px;overflow:hidden}
.quote-mode-btn{flex:1;padding:12px;text-align:center;cursor:pointer;border:none;background:transparent;color:var(--muted);font-family:inherit}
.quote-mode-btn:hover{background:var(--panel-alt)}
.quote-mode-btn.active.known{background:var(--positive);color:#fff}
.quote-mode-btn.active.ai{background:var(--info);color:#fff}
.quote-mode-title{font-weight:600;font-size:12px}
.quote-mode-desc{font-size:9px;opacity:0.8}
.quote-stats{display:flex;gap:16px;padding:10px 16px;background:var(--panel-alt);border-bottom:1px solid var(--border)}
.quote-stat{display:flex;align-items:baseline;gap:4px}
.quote-stat-val{font-size:16px;font-weight:600}
.quote-stat-lbl{font-size:9px;color:var(--muted);text-transform:uppercase}
.quote-table{width:100%;border-collapse:collapse;font-size:11px}
.quote-table th{padding:8px 10px;text-align:left;background:var(--panel-alt);color:var(--muted);font-size:9px;text-transform:uppercase;border-bottom:1px solid var(--border)}
.quote-table td{padding:6px 10px;border-bottom:1px solid var(--border)}
.quote-table tr:hover{background:var(--panel-alt)}
.quote-table input,.quote-table select{padding:4px 6px;font-size:10px;width:100%;background:var(--bg);border:1px solid var(--border);color:var(--text)}
.quote-table input:focus,.quote-table select:focus{border-color:var(--accent);outline:none}
.quote-table .col-cb{width:30px}
.quote-table .col-prod{width:120px}
.quote-table .col-origin{width:110px}
.quote-table .col-num{width:55px;text-align:right}
.quote-table .col-act{width:30px;text-align:center}
.quote-row-short{background:rgba(59,130,246,0.08)}
.quote-row-short input,.quote-row-short select{border-color:var(--info);background:rgba(59,130,246,0.1)}
.short-dot{display:inline-block;width:8px;height:8px;background:var(--info);border-radius:50%;margin-right:4px}
.quote-del-btn{background:none;border:none;color:var(--negative);cursor:pointer;font-size:14px;padding:2px 6px}
.quote-del-btn:hover{background:rgba(239,68,68,0.2);border-radius:3px}
.freight-panel{background:linear-gradient(135deg,rgba(245,166,35,0.1),rgba(245,166,35,0.05));border:1px solid var(--warn);border-radius:var(--radius);padding:14px;margin-bottom:14px}
.freight-title{font-weight:600;color:var(--warn);font-size:11px;margin-bottom:10px;display:flex;align-items:center;gap:6px}
.freight-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.freight-group{display:flex;flex-direction:column;gap:3px}
.freight-lbl{font-size:9px;color:var(--muted);text-transform:uppercase}
.lane-list{max-height:100px;overflow-y:auto;margin-top:10px;border-top:1px solid var(--border);padding-top:8px}
.lane-item{display:flex;justify-content:space-between;padding:4px 6px;font-size:10px;cursor:pointer;border-radius:3px}
.lane-item:hover{background:var(--panel)}
.lane-miles{color:var(--accent);font-weight:600}
.ai-panel{border-radius:var(--radius);padding:14px;margin-bottom:14px}
.ai-panel.known-mode{background:linear-gradient(135deg,rgba(34,197,94,0.1),rgba(34,197,94,0.05));border:1px solid var(--positive)}
.ai-panel.ai-mode{background:linear-gradient(135deg,rgba(59,130,246,0.1),rgba(59,130,246,0.05));border:1px solid var(--info)}
.ai-panel-title{font-weight:600;font-size:11px;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.ai-panel-title.known{color:var(--positive)}
.ai-panel-title.ai{color:var(--info)}
.ai-strat{display:flex;flex-wrap:wrap;gap:6px}
.ai-strat-btn{padding:6px 10px;background:var(--panel);border:1px solid var(--border);border-radius:3px;font-size:10px;cursor:pointer}
.ai-strat-btn:hover{border-color:var(--accent)}
.ai-strat-btn.active{border-color:var(--info);background:rgba(59,130,246,0.15)}
.ai-insight{margin-top:10px;padding:10px;background:var(--panel);border-radius:var(--radius);font-size:10px;line-height:1.5}
.customer-list{max-height:160px;overflow-y:auto}
.customer-item{display:flex;align-items:center;gap:6px;padding:8px 10px;border-bottom:1px solid var(--border);font-size:11px}
.customer-item:hover{background:var(--panel-alt)}
.customer-info{flex:1}
.customer-name{font-weight:500}
.customer-dest{font-size:9px;color:var(--warn)}
.customer-freight{text-align:right;font-size:10px}
.customer-freight .rate{color:var(--accent);font-weight:600}
.customer-freight .miles{font-size:9px;color:var(--muted)}
.output-tabs{display:flex;gap:3px;margin-bottom:8px;overflow-x:auto}
.output-tab{padding:5px 10px;font-size:10px;background:var(--panel-alt);border:1px solid var(--border);border-radius:3px 3px 0 0;cursor:pointer;white-space:nowrap}
.output-tab:hover{border-color:var(--accent)}
.output-tab.active{background:var(--accent);color:var(--bg);border-color:var(--accent)}
.output-preview{background:var(--bg);border:1px solid var(--border);border-radius:var(--radius);padding:10px;font-size:9px;max-height:250px;overflow:auto;line-height:1.4}
.quote-table-output{font-family:inherit}
.quote-header{margin-bottom:8px;padding-bottom:8px;border-bottom:2px solid var(--accent)}
.quote-title{font-size:12px;font-weight:700;color:var(--accent);letter-spacing:0.5px}
.quote-dest{font-size:10px;color:var(--text);margin-top:2px}
.quote-output-table{width:100%;border-collapse:collapse;font-size:10px}
.quote-output-table th{text-align:left;padding:4px 8px;background:var(--card);color:var(--muted);font-weight:500;font-size:9px;text-transform:uppercase;border-bottom:1px solid var(--border)}
.quote-output-table td{padding:6px 8px;border-bottom:1px solid var(--border)}
.quote-output-table tr:hover{background:var(--card)}
.quote-output-table .qty{text-align:center;color:var(--muted)}
.quote-output-table .price{text-align:right;font-weight:600;color:var(--positive)}
.quote-output-table .ship{text-align:right;color:var(--info);font-size:9px}
.quote-output-table .msr-row{background:rgba(255,193,7,0.1)}
.quote-output-table .msr-row td:first-child{color:var(--warn)}
.quote-footer{margin-top:8px;padding-top:6px;border-top:1px solid var(--border);font-size:9px;color:var(--muted);text-align:center}
.quote-toolbar{display:flex;gap:8px;align-items:center;margin-bottom:12px;padding:10px;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);flex-wrap:wrap}

/* ===== TOAST NOTIFICATIONS ===== */
.toast-container{position:fixed;top:16px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:8px;pointer-events:none}
.toast{display:flex;align-items:center;gap:10px;padding:12px 16px;border-radius:8px;transform:translateX(120%);transition:transform 300ms ease;min-width:280px;max-width:380px;pointer-events:auto;box-shadow:0 4px 12px rgba(0,0,0,0.3);font-size:12px;font-weight:500}
.toast-visible{transform:translateX(0)}
.toast-info{background:var(--info);color:#fff}
.toast-positive{background:var(--positive);color:#fff}
.toast-warn{background:var(--warn);color:var(--bg)}
.toast-negative{background:var(--negative);color:#fff}
.toast-icon{font-size:16px}
.toast-msg{flex:1}
.toast-close{background:none;border:none;color:inherit;opacity:0.7;cursor:pointer;font-size:16px;padding:0 4px}
.toast-close:hover{opacity:1}

/* ===== SKELETON LOADERS ===== */
.skeleton{background:linear-gradient(90deg,var(--panel-alt) 25%,var(--border) 50%,var(--panel-alt) 75%);background-size:200% 100%;animation:pulse 1.5s ease infinite;border-radius:var(--radius)}
.skeleton-text{height:12px;margin-bottom:8px}
.skeleton-text.short{width:60%}
.skeleton-kpi{height:60px}
.skeleton-table{height:200px}

/* ===== CRM KANBAN ===== */
.kanban-board{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;min-height:400px}
.kanban-column{background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:12px;display:flex;flex-direction:column}
.kanban-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:12px;margin-bottom:8px;border-bottom:1px solid var(--border);font-size:12px;font-weight:600}
.kanban-count{background:var(--panel-alt);padding:2px 8px;border-radius:10px;font-size:11px}
.kanban-cards{flex:1;display:flex;flex-direction:column;gap:8px;overflow-y:auto;min-height:100px}
.kanban-card{background:var(--panel);border:1px solid var(--border);border-radius:6px;padding:12px;cursor:grab;transition:box-shadow 150ms,transform 150ms}
.kanban-card:hover{box-shadow:0 2px 8px rgba(0,0,0,0.3);transform:translateY(-1px)}
.kanban-card:active{cursor:grabbing}
.kanban-column.drag-over{background:var(--panel-alt);border-color:var(--accent)}
.kanban-card-title{font-weight:600;font-size:12px;margin-bottom:4px}
.kanban-card-sub{font-size:11px;color:var(--muted)}
.kanban-card-meta{font-size:10px;color:var(--muted);margin-top:6px;display:flex;justify-content:space-between}
@media(max-width:768px){.kanban-board{grid-template-columns:1fr}}

/* ===== CRM TIMELINE ===== */
.timeline-item{display:flex;gap:12px;position:relative;padding-bottom:20px}
.timeline-line{position:absolute;left:17px;top:36px;bottom:0;width:2px;background:var(--border)}
.timeline-item:last-child .timeline-line{display:none}
.timeline-icon{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;z-index:1}
.timeline-icon-call{background:rgba(0,255,136,0.2)}
.timeline-icon-email{background:rgba(59,130,246,0.2)}
.timeline-icon-meeting{background:rgba(245,166,35,0.2)}
.timeline-icon-note{background:rgba(107,124,147,0.2)}
.timeline-content{flex:1;background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:12px}
.timeline-header{display:flex;justify-content:space-between;margin-bottom:6px}
.timeline-type{font-weight:600;font-size:12px;text-transform:capitalize}
.timeline-date{font-size:10px;color:var(--muted)}
.timeline-notes{font-size:12px;line-height:1.5}
.timeline-products{font-size:10px;color:var(--info);margin-top:4px}
.timeline-followup{font-size:10px;color:var(--warn);margin-top:4px}

/* ===== CRM FAB ===== */
.crm-fab{position:fixed;bottom:80px;right:80px;width:56px;height:56px;border-radius:50%;background:var(--info);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:0 4px 16px rgba(59,130,246,0.4);z-index:100;transition:transform 0.2s ease;display:flex;align-items:center;justify-content:center}
.crm-fab:hover{transform:scale(1.1)}

/* ===== CONFIRM DIALOG ===== */
.confirm-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn 0.15s ease}
.confirm-dialog{background:var(--panel);border:1px solid var(--border);padding:24px;border-radius:var(--radius);max-width:400px;text-align:center}
.confirm-dialog h3{margin-bottom:12px;color:var(--text)}
.confirm-dialog p{color:var(--muted);font-size:11px;margin-bottom:20px}
.confirm-dialog .actions{display:flex;gap:8px;justify-content:center}

/* ===== MOBILE ===== */
/* Mobile Header (hidden on desktop) */
.mobile-header{display:none;position:fixed;top:0;left:0;right:0;height:56px;background:var(--panel);border-bottom:1px solid var(--border);z-index:100;padding:0 16px;align-items:center;justify-content:space-between}
.mobile-header .logo{background:linear-gradient(135deg,var(--accent),#00cc66);padding:6px 12px;font-weight:700;font-size:12px;color:var(--bg)}
.hamburger{background:none;border:none;color:var(--text);font-size:24px;cursor:pointer;padding:8px}

/* Mobile Bottom Nav (hidden on desktop) */
.mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;height:64px;background:var(--panel);border-top:1px solid var(--border);z-index:100}
.mobile-nav-items{display:flex;height:100%}
.mobile-nav-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;color:var(--muted);font-size:9px;cursor:pointer;border:none;background:none}
.mobile-nav-item.active{color:var(--accent)}
.mobile-nav-item svg,.mobile-nav-item .nav-icon{font-size:20px}

/* Mobile Sidebar Overlay */
.sidebar-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:199}
.sidebar-overlay.open{display:block}

/* Mobile Responsive */
@media(max-width:768px){
  body{overflow:auto;height:auto;min-height:100vh}
  #app{flex-direction:column;height:auto;min-height:100vh;padding-top:56px;padding-bottom:64px}

  /* Show mobile elements */
  .mobile-header{display:flex}
  .mobile-nav{display:block}

  /* Hide desktop sidebar, show as slide-out */
  .sidebar{position:fixed;left:-260px;top:0;bottom:0;width:260px;z-index:200;transition:left 0.3s ease}
  .sidebar.open{left:0}

  /* Main content */
  .main{width:100%;overflow:visible}
  .header{display:none}
  .content{padding:12px;overflow:visible}

  /* Grids stack on mobile */
  .grid-2,.grid-3,.grid-2-1,.form-grid,.quote-grid{grid-template-columns:1fr}
  .form-group.full{grid-column:span 1}

  /* KPI cards */
  .kpi-grid{grid-template-columns:1fr 1fr;gap:8px}
  .kpi{padding:12px}
  .kpi-value{font-size:16px}

  /* Tables scroll horizontally */
  .table-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch}
  table{min-width:600px}
  th,td{padding:8px 10px;font-size:11px}

  /* Cards */
  .card{margin-bottom:12px}
  .card-header{padding:10px 12px;flex-wrap:wrap;gap:8px}
  .card-body{padding:12px;overflow-x:auto}

  /* Buttons larger for touch */
  .btn{padding:12px 16px;font-size:12px;min-height:44px}
  .btn-sm{padding:8px 12px;min-height:36px}
  select,input[type="text"],input[type="number"],input[type="date"],input[type="password"],textarea{padding:12px;font-size:14px;min-height:44px}

  /* Modal full screen on mobile */
  .modal{width:100%;height:100%;max-height:100%;border-radius:0}
  .modal.wide{width:100%}
  .modal-body{padding:16px}

  /* Quote engine */
  .quote-grid{display:flex;flex-direction:column}
  .freight-panel{padding:12px}
  .output-preview{max-height:300px}

  /* AI Chat */
  .ai-chat{height:calc(100vh - 180px)}
  .ai-input-area{padding:12px}
  .ai-input-area textarea{min-height:50px}

  /* AI Side Panel Mobile */
  .ai-sidepanel{position:fixed;top:0;right:0;bottom:60px;width:100%;z-index:200;transition:right 0.3s ease}
  .ai-sidepanel.collapsed{right:-100%;width:100%}
  .ai-toggle{bottom:70px;right:16px}

  /* Action buttons wrap */
  .action-buttons{flex-wrap:wrap}
  .header-right{flex-wrap:wrap;width:100%;justify-content:flex-start}

  /* Kanban responsive */
  .kanban-board{flex-direction:column}
  .kanban-column{flex:none;width:100%}
  .kanban-cards{max-height:300px}

  /* CRM FAB */
  .crm-fab{bottom:70px;right:16px}

  /* Breadcrumbs hide on mobile */
  .breadcrumbs{display:none}
}

/* Small phones */
@media(max-width:400px){
  .kpi-grid{grid-template-columns:1fr}
  .mobile-nav-item{font-size:8px}
  .content{padding:8px}
}

/* ===== QUICK ENTRY GRID ===== */
.modal.extra-wide{width:95%;max-width:1200px}
.quick-entry-table{width:100%;border-collapse:collapse;font-size:11px}
.quick-entry-table th{padding:8px 6px;text-align:left;background:var(--panel-alt);color:var(--muted);font-size:9px;text-transform:uppercase;border-bottom:1px solid var(--border);white-space:nowrap}
.quick-entry-table td{padding:4px 3px;border-bottom:1px solid var(--border)}
.quick-entry-table input,.quick-entry-table select{padding:6px 8px;font-size:11px;width:100%;background:var(--bg);border:1px solid var(--border);color:var(--text);font-family:inherit}
.quick-entry-table input:focus,.quick-entry-table select:focus{border-color:var(--accent);outline:none;background:var(--panel-alt)}
.quick-entry-table input::placeholder{color:var(--muted);opacity:0.7}
.quick-entry-table .col-order{width:80px}
.quick-entry-table .col-date{width:110px}
.quick-entry-table .col-mill{width:160px}
.quick-entry-table .col-origin{width:100px}
.quick-entry-table .col-region{width:80px}
.quick-entry-table .col-product{width:100px}
.quick-entry-table .col-length{width:70px}
.quick-entry-table .col-volume{width:70px}
.quick-entry-table .col-price{width:80px}
.quick-entry-table .col-actions{width:50px;text-align:center}
.quick-entry-table tr:hover{background:var(--panel-alt)}
.qe-row-btn{background:none;border:1px solid var(--border);color:var(--muted);cursor:pointer;padding:4px 8px;font-size:12px;border-radius:3px}
.qe-row-btn:hover{background:var(--panel);color:var(--text)}
.qe-row-btn.add{color:var(--positive);border-color:var(--positive)}
.qe-row-btn.add:hover{background:rgba(34,197,94,0.1)}
.qe-row-btn.remove{color:var(--negative);border-color:var(--negative)}
.qe-row-btn.remove:hover{background:rgba(239,68,68,0.1)}
.qe-actions{display:flex;gap:8px;margin-top:16px;justify-content:space-between;align-items:center}
.qe-actions-left{display:flex;gap:8px}
.qe-status{font-size:11px;color:var(--muted)}

/* ===== P&L CALENDAR / HEATMAP ===== */
.pnl-calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
.pnl-cal-dow{text-align:center;font-size:10px;color:var(--muted);font-weight:600;padding:6px 0;text-transform:uppercase}
.pnl-cal-cell{min-height:60px;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:6px;cursor:pointer;transition:transform 0.12s ease,box-shadow 0.12s ease;position:relative}
.pnl-cal-cell:hover{transform:scale(1.04);box-shadow:0 2px 8px rgba(0,0,0,0.3);z-index:1}
.pnl-cal-cell.empty{background:transparent;border-color:transparent;cursor:default}
.pnl-cal-cell.empty:hover{transform:none;box-shadow:none}
.pnl-cal-cell.selected{border-color:var(--accent);box-shadow:0 0 0 2px rgba(0,255,136,0.3)}
.pnl-cal-day{font-size:10px;color:var(--muted);margin-bottom:4px}
.pnl-cal-amt{font-family:'SF Mono','Consolas','Fira Code',monospace;font-size:11px;font-weight:600;text-align:center;margin-top:4px}
.pnl-cal-trades{font-size:9px;color:var(--muted);text-align:center;margin-top:2px}
.pnl-month-nav{display:flex;align-items:center;justify-content:center;gap:16px;margin-bottom:16px}
.pnl-month-nav button{background:var(--border);border:1px solid var(--border-light);color:var(--text);padding:6px 14px;border-radius:var(--radius);cursor:pointer;font-family:inherit;font-size:12px}
.pnl-month-nav button:hover{background:var(--panel-alt)}
.pnl-month-label{font-size:16px;font-weight:600;min-width:180px;text-align:center}
.pnl-day-detail{margin-top:16px;animation:fadeIn 0.2s ease}

@media(max-width:768px){
  .pnl-calendar-grid{gap:2px}
  .pnl-cal-cell{min-height:44px;padding:4px}
  .pnl-cal-amt{font-size:9px}
  .pnl-cal-day{font-size:8px}
  .pnl-month-label{font-size:14px;min-width:140px}
}
@media(max-width:400px){
  .pnl-cal-cell{min-height:36px;padding:2px}
  .pnl-cal-amt{font-size:8px}
  .pnl-cal-trades{display:none}
}

/* ===== PDF EXPORT ===== */
.pdf-export-mode{background:#fff !important;color:#1a1a2e !important}
.pdf-export-mode .btn{display:none !important}
.pdf-export-mode .card{border-color:#d1d9e6 !important;background:#fff !important}
.pdf-export-mode .card-header{background:#f0f2f5 !important;border-color:#d1d9e6 !important}
.pdf-export-mode .card-title{color:#00b894 !important}
.pdf-export-mode .kpi{background:#fff !important;border-color:#d1d9e6 !important}
.pdf-export-mode .kpi-label{color:#6c7a8a !important}
.pdf-export-mode .pnl-cal-cell{border-color:#d1d9e6 !important}
.pdf-export-mode .pnl-cal-day,.pdf-export-mode .pnl-cal-trades{color:#6c7a8a !important}
.pdf-export-mode .pnl-month-label{color:#1a1a2e !important}
.pdf-export-mode th{background:#f0f2f5 !important;color:#6c7a8a !important;border-color:#d1d9e6 !important}
.pdf-export-mode td{border-color:#d1d9e6 !important;color:#1a1a2e !important}

@media print{
  .sidebar,.mobile-header,.mobile-nav,.ai-sidepanel,.ai-toggle,.header,#modal,.breadcrumbs{display:none !important}
  #app{display:block}
  .main{overflow:visible}
  .content{padding:10px;overflow:visible}
}
