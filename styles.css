/* SYP Analytics - Trading Terminal UI
   Bloomberg-inspired design system */

/* ===== RESET & VARIABLES ===== */
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#1e1e2e;--panel:#2a2a3c;--panel-alt:#252538;
  --border:#3e3e56;--border-light:#50506a;
  --accent:#89b4fa;--warn:#f9e2af;--negative:#f38ba8;
  --positive:#a6e3a1;--info:#89dceb;
  --text:#f5f5f7;--muted:#a0a0b8;
  --card:#1e1e2e;
  --radius:2px;
  --sidebar-width:200px;
  --accent-glow:rgba(137,180,250,0.25);
  --glow-sm:0 0 6px var(--accent-glow);
  --glow-md:0 0 12px var(--accent-glow);
  --mono:'SF Mono','Consolas','Fira Code',monospace;
  --font:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  --status-bar-height:28px;
}

/* Light theme support */
[data-theme="light"]{
  --bg:#f5f7fa;--panel:#ffffff;--panel-alt:#f0f2f5;
  --border:#d1d9e6;--border-light:#b8c4d4;
  --accent:#1a73e8;--warn:#e67e22;--negative:#e74c3c;
  --positive:#27ae60;--info:#2980b9;
  --text:#1a1a2e;--muted:#6c7a8a;
  --card:#ffffff;
  --accent-glow:rgba(26,115,232,0.15);
}

@keyframes fadeIn{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeInView{from{opacity:0}to{opacity:1}}
@keyframes slideIn{from{transform:translateX(-10px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}
@keyframes spin{to{transform:rotate(360deg)}}
.spinner{width:24px;height:24px;border:2px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .6s linear infinite}

/* ===== TYPOGRAPHY ===== */
body{font-family:var(--font);font-size:12px;background:var(--bg);color:var(--text);overflow:hidden;height:100vh;-webkit-font-smoothing:antialiased}
.mono{font-family:var(--mono)}
td,.kpi-value,.mkt-row .price,.quote-table td,.quote-output-table td,code,pre,.output-preview,.badge,.pnl-cal-amt,.mover-change,.quote-stat-val,.activity-value,.freight-group,input[type="number"]{font-family:var(--mono);font-size:11px}
.header h1{font-size:14px;font-weight:600;letter-spacing:0.3px}
.card-title{font-size:10px;letter-spacing:0.8px;text-transform:uppercase}

/* ===== STATUS BAR ===== */
.status-bar{height:var(--status-bar-height);background:var(--bg);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;padding:0 12px;font-family:var(--mono);font-size:10px;color:var(--muted);flex-shrink:0}
.status-app{color:var(--accent);font-weight:700;letter-spacing:1.5px;font-size:10px}
.status-sep{margin:0 8px;opacity:0.3}
.status-dot{width:6px;height:6px;border-radius:50%;display:inline-block;margin-right:4px}
.status-dot.live{background:var(--positive);box-shadow:0 0 6px rgba(166,227,161,0.5);animation:pulse 2s ease-in-out infinite}
.status-dot.offline{background:var(--negative);box-shadow:0 0 6px rgba(243,139,168,0.5)}
.status-clock{font-variant-numeric:tabular-nums}
.status-left,.status-right{display:flex;align-items:center}

/* ===== LAYOUT ===== */
#app{display:flex;height:calc(100vh - var(--status-bar-height))}
.sidebar{width:var(--sidebar-width);background:var(--panel);border-right:1px solid var(--border);display:flex;flex-direction:column;transition:width 0.15s ease}

.sidebar-header{padding:12px 12px 10px;border-bottom:1px solid var(--border)}
.logo{background:transparent;padding:0;font-weight:700;font-size:12px;color:var(--accent);text-align:left;letter-spacing:2px;font-family:var(--mono)}
.company{color:var(--muted);font-size:9px;text-align:left;margin-top:2px;letter-spacing:0.5px}

/* Sidebar Toggle */
.sidebar{position:relative}
.sidebar.collapsed{width:48px}
.sidebar.collapsed .nav-label{display:none}
.sidebar.collapsed .nav-group-label{display:none}
.sidebar.collapsed .sidebar-footer{display:none}
.sidebar.collapsed .company{display:none}
.sidebar.collapsed .theme-toggle{display:none}
.sidebar.collapsed .sidebar-header select{display:none}
.sidebar.collapsed .sidebar-header>div{display:none}
.sidebar.collapsed .logo{font-size:0;padding:8px;text-align:center}
.sidebar.collapsed .logo::after{content:'SYP';font-size:9px;font-weight:700;color:var(--accent);font-family:var(--mono);letter-spacing:1px}
.sidebar.collapsed .nav-item{justify-content:center;padding:10px 0}
.sidebar.collapsed .nav-item span:first-child{font-size:16px}
.sidebar-toggle-btn{position:absolute;bottom:0;left:0;width:100%;background:none;border:none;border-top:1px solid var(--border);color:var(--muted);cursor:pointer;padding:8px 0;font-size:12px;transition:color 0.1s}
.sidebar-toggle-btn:hover{color:var(--text);background:var(--panel-alt)}

/* Theme Toggle */
.theme-toggle{background:none;border:1px solid var(--border);color:var(--muted);cursor:pointer;font-size:12px;padding:4px 8px;border-radius:var(--radius);margin-top:8px;width:100%;text-align:center}
.theme-toggle:hover{background:var(--border);color:var(--text)}

/* Nav Groups */
.nav{flex:1;padding:6px;overflow-y:auto}
.nav-group-label{padding:10px 12px 4px;font-size:8px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;font-weight:700}
.nav-item{width:100%;padding:8px 12px;margin-bottom:1px;background:0;border:0;border-left:2px solid transparent;border-radius:0;color:var(--muted);cursor:pointer;text-align:left;font-size:11px;font-family:inherit;display:flex;align-items:center;gap:10px;transition:all 0.1s ease}
.nav-item:hover{background:rgba(137,180,250,0.06);color:var(--text);border-left-color:rgba(137,180,250,0.3)}
.nav-item.active{background:rgba(137,180,250,0.1);color:var(--accent);border-left-color:var(--accent)}

.sidebar-footer{padding:10px 12px;border-top:1px solid var(--border)}
.mkt-label{color:var(--muted);font-size:9px;margin-bottom:4px;text-transform:uppercase;letter-spacing:0.5px}
.mkt-row{display:flex;justify-content:space-between;font-size:11px;margin-bottom:2px}
.mkt-row .price{font-weight:600;font-family:var(--mono)}
.mkt-row.west .price{color:var(--accent)}
.mkt-row.central .price{color:var(--warn)}
.mkt-row.east .price{color:var(--info)}
.mkt-date{color:var(--muted);font-size:9px;margin-top:4px}

/* ===== MAIN CONTENT ===== */
.main{flex:1;display:flex;flex-direction:column;overflow:hidden}
.header{padding:8px 20px;border-bottom:1px solid var(--border);background:var(--bg);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}
.header-left{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.filters{display:flex;gap:6px}
.header-right{display:flex;gap:6px}

/* Breadcrumbs */
.breadcrumbs{padding:6px 20px;font-size:10px;color:var(--muted);border-bottom:1px solid var(--border);background:var(--panel)}
.breadcrumbs a{color:var(--accent);text-decoration:none;cursor:pointer}
.breadcrumbs a:hover{text-decoration:underline}
.breadcrumbs .separator{margin:0 6px;opacity:0.3}

/* Content transitions */
.content{flex:1;overflow:auto;padding:16px;transition:opacity 100ms ease}
.content.fading{opacity:0}
.content.fade-in{animation:fadeInView 0.15s ease}

/* ===== FORMS ===== */
select,input[type="text"],input[type="number"],input[type="date"],input[type="password"],textarea{padding:6px 8px;background:var(--bg);border:1px solid var(--border);color:var(--text);font-size:11px;font-family:inherit;border-radius:var(--radius);transition:border-color 0.1s ease}
select:focus,input:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:var(--glow-sm)}

/* ===== BUTTONS ===== */
.btn{padding:6px 14px;border:none;font-size:10px;font-weight:600;font-family:inherit;cursor:pointer;border-radius:var(--radius);transition:all 0.1s ease;text-transform:uppercase;letter-spacing:0.3px}
.btn-default{background:var(--border);color:var(--text);border:1px solid var(--border-light)}
.btn-primary{background:var(--accent);color:#000;box-shadow:var(--glow-sm)}
.btn-success{background:var(--positive);color:#000;box-shadow:0 0 6px rgba(166,227,161,0.25)}
.btn-danger{background:transparent;color:var(--negative);border:1px solid var(--negative)}
.btn-warn{background:var(--warn);color:#000}
.btn-info{background:var(--info);color:#000}
.btn-sm{padding:4px 10px;font-size:9px}
.btn:hover{filter:brightness(1.15);box-shadow:var(--glow-md)}
.btn:active{filter:brightness(0.95)}
.btn:disabled{opacity:0.4;cursor:not-allowed;filter:none;box-shadow:none}

/* ===== CARDS ===== */
.card{background:var(--panel);border:1px solid var(--border);margin-bottom:12px;border-radius:var(--radius);transition:border-color 0.15s ease}
.card:hover{border-color:rgba(137,180,250,0.2)}
.card-header{padding:6px 12px;background:var(--bg);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;border-radius:var(--radius) var(--radius) 0 0}
.card-title{font-weight:600;font-size:10px;color:var(--muted);letter-spacing:0.8px;text-transform:uppercase}
.card-title.positive{color:var(--positive)}
.card-title.warn{color:var(--warn)}
.card-title.negative{color:var(--negative)}
.card-title.info{color:var(--info)}
.card-body{padding:12px}

/* ===== KPI ===== */
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-bottom:16px}
.kpi{background:var(--panel);border:1px solid var(--border);border-left:2px solid var(--border-light);padding:10px 12px;border-radius:var(--radius)}
.kpi-label{color:var(--muted);font-size:9px;margin-bottom:4px;text-transform:uppercase;letter-spacing:0.5px}
.kpi-value{font-size:18px;font-weight:700;font-family:var(--mono)}
.kpi-sub{color:var(--muted);font-size:10px;margin-left:6px}
.kpi-value.positive{color:var(--positive);text-shadow:0 0 12px rgba(166,227,161,0.2)}
.kpi-value.negative{color:var(--negative);text-shadow:0 0 12px rgba(243,139,168,0.2)}
.kpi-content{display:flex;align-items:center;gap:8px}
.kpi-spark{display:block;margin-top:2px;flex-shrink:0}
.kpi-delta{font-size:10px;margin-top:2px;font-weight:600;font-family:var(--mono)}
.kpi-delta.up{color:var(--positive)}
.kpi-delta.down{color:var(--negative)}

/* ===== RANGE SELECTOR ===== */
.range-selector{display:flex;gap:2px;margin-left:auto}
.range-btn{background:none;border:1px solid var(--border);color:var(--muted);cursor:pointer;padding:2px 8px;font-size:9px;font-family:inherit;border-radius:var(--radius);transition:all 0.1s}
.range-btn:hover{color:var(--text);border-color:var(--text)}
.range-btn.active{background:var(--accent);color:#000;border-color:var(--accent)}

/* ===== MARKET MOVERS ===== */
.mover-item{display:flex;justify-content:space-between;align-items:center;padding:6px 12px;border-bottom:1px solid var(--border)}
.mover-item:last-child{border-bottom:none}
.mover-name{font-weight:500;font-size:11px}
.mover-region{font-size:9px;color:var(--muted);text-transform:capitalize}
.mover-change{font-weight:700;font-size:13px;font-family:var(--mono)}
.mover-pct{font-size:10px;margin-left:6px}

/* ===== STALE DATA ===== */
.stale-badge{display:inline-flex;align-items:center;gap:4px;font-size:9px;color:var(--warn);margin-left:8px}
.stale-dot{width:6px;height:6px;border-radius:50%;background:var(--warn);animation:pulse 2s ease-in-out infinite}

/* ===== FOCUS MODE ===== */
.card-expand-btn{background:none;border:none;color:var(--muted);cursor:pointer;font-size:12px;padding:2px 4px;transition:color 0.1s;opacity:0.4}
.card-expand-btn:hover{color:var(--text);opacity:1}
.card-expanded{position:fixed!important;top:16px;left:16px;right:16px;bottom:16px;z-index:1000;margin:0!important;overflow:auto;animation:fadeIn 0.15s ease}
.card-expanded .card-body{max-height:calc(100vh - 120px);overflow:auto}
.card-expand-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(5,5,8,0.9);z-index:999}

/* ===== DRAG-TO-REORDER ===== */
.dash-section{position:relative;transition:opacity 0.15s}
.dash-section.dragging{opacity:0.4}
.dash-drag-handle{cursor:grab;color:var(--muted);font-size:10px;padding:2px 4px;position:absolute;top:4px;left:-16px;opacity:0;transition:opacity 0.1s;z-index:2}
.dash-section:hover .dash-drag-handle{opacity:0.5}
.dash-drag-handle:hover{opacity:1!important}
.dash-section.drag-over{border-top:2px solid var(--accent)}

/* ===== TABLES ===== */
table{width:100%;border-collapse:collapse}
th{padding:6px 10px;text-align:left;border-bottom:1px solid var(--border);color:var(--muted);font-size:9px;text-transform:uppercase;letter-spacing:0.5px;background:var(--bg);position:sticky;top:0;z-index:1}
th.right{text-align:right}
th[onclick],th[style*="cursor"]{cursor:pointer}
th[onclick]:hover,th[style*="cursor"]:hover{color:var(--accent)}
td{padding:6px 10px;border-bottom:1px solid var(--border)}
tr:nth-child(even){background:var(--panel)}
tr:nth-child(odd){background:rgba(10,10,16,0.5)}
tr:hover{background:rgba(137,180,250,0.06) !important}
td.right{text-align:right}
td.positive{color:var(--positive);text-shadow:0 0 8px rgba(166,227,161,0.15)}
td.negative{color:var(--negative);text-shadow:0 0 8px rgba(243,139,168,0.15)}
td.accent{color:var(--accent)}
td.warn{color:var(--warn)}
td.bold{font-weight:500}

/* Row hover actions */
tr .row-actions{opacity:0;transition:opacity 0.1s ease}
tr:hover .row-actions{opacity:1}

/* Table filter bar */
.table-filter-bar{display:flex;gap:6px;padding:6px 10px;background:var(--bg);border-bottom:1px solid var(--border);flex-wrap:wrap;align-items:center}
.table-filter-bar input,.table-filter-bar select{padding:4px 8px;font-size:10px}

/* ===== BADGES ===== */
.badge{display:inline-block;padding:1px 6px;font-size:9px;font-family:var(--mono);border-radius:1px;text-transform:uppercase;letter-spacing:0.3px}
.badge-pending{background:rgba(249,226,175,0.15);color:var(--warn)}
.badge-success{background:rgba(166,227,161,0.12);color:var(--positive)}
.badge-info{background:rgba(137,220,235,0.15);color:var(--info)}
.badge-warn{background:rgba(249,226,175,0.15);color:var(--warn)}
.badge-danger{background:rgba(243,139,168,0.12);color:var(--negative)}

/* ===== MODALS ===== */
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn 0.1s ease}
.modal{background:var(--panel);border:1px solid var(--accent);width:500px;max-height:90vh;display:flex;flex-direction:column;border-radius:var(--radius);box-shadow:0 0 20px var(--accent-glow)}
.modal.wide{width:700px}
.modal-header{padding:10px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;background:var(--bg);border-radius:var(--radius) var(--radius) 0 0}
.modal-title{font-weight:700;font-size:11px;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px}
.modal-title.positive{color:var(--positive)}
.modal-title.warn{color:var(--warn)}
.modal-close{background:none;border:none;color:var(--muted);font-size:18px;cursor:pointer;transition:color 0.1s ease}
.modal-close:hover{color:var(--text)}
.modal-body{padding:16px;overflow-y:auto;flex:1}
.modal-footer{padding:12px 16px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:8px;border-radius:0 0 var(--radius) var(--radius)}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.form-group{display:flex;flex-direction:column;gap:3px}
.form-group.full{grid-column:span 2}
.form-label{font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:0.3px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
.grid-2-1{display:grid;grid-template-columns:2fr 1fr;gap:12px}

/* ===== CHARTS ===== */
.chart-container{height:160px;display:flex;align-items:flex-end;gap:8px;padding:10px 0}
.chart-bar-group{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px}
.chart-bars{display:flex;gap:2px;align-items:flex-end;height:120px}
.chart-bar{width:10px;border-radius:1px 1px 0 0;min-height:2px}
.chart-bar.west{background:var(--accent)}
.chart-bar.central{background:var(--warn)}
.chart-bar.east{background:var(--info)}
.chart-label{color:var(--muted);font-size:9px;font-family:var(--mono)}
.chart-legend{display:flex;justify-content:center;gap:16px;margin-top:8px}
.legend-item{display:flex;align-items:center;gap:6px}
.legend-dot{width:8px;height:8px;border-radius:1px}
.legend-dot.west{background:var(--accent)}
.legend-dot.central{background:var(--warn)}
.legend-dot.east{background:var(--info)}
.legend-text{color:var(--muted);font-size:9px}

/* ===== PROGRESS ===== */
.progress-bar{height:4px;background:var(--border);border-radius:0;overflow:hidden}
.progress-fill{height:100%;border-radius:0;transition:width 0.3s ease}
.progress-fill.accent{background:var(--accent)}
.progress-fill.warn{background:var(--warn)}
.progress-fill.info{background:var(--info)}

/* ===== ACTIVITY ===== */
.activity-item{padding:8px 12px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.activity-main{font-weight:500;font-size:11px}
.activity-sub{color:var(--muted);font-size:10px;margin-top:2px}
.activity-right{text-align:right}
.activity-value{font-weight:600;font-family:var(--mono)}
.activity-value.positive{color:var(--positive)}
.activity-value.accent{color:var(--accent)}
.empty-state{padding:40px;text-align:center;color:var(--muted);font-size:11px}
.action-buttons{display:flex;gap:4px}

/* ===== AI CHAT ===== */
.ai-chat{display:flex;flex-direction:column;height:calc(100vh - var(--status-bar-height) - 140px)}
.ai-messages{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
.ai-msg{padding:10px 14px;border-radius:4px;max-width:85%;line-height:1.5;font-size:11px}
.ai-msg.user{white-space:pre-wrap;background:var(--accent);color:#000;align-self:flex-end}
.ai-msg.assistant{background:var(--bg);border:1px solid var(--border);align-self:flex-start;white-space:normal}
.ai-msg.assistant pre{background:var(--panel);border:1px solid var(--border);border-radius:2px;padding:8px 10px;margin:6px 0;overflow-x:auto;white-space:pre-wrap;word-break:break-word;font-size:10px;line-height:1.4}
.ai-msg.assistant code{background:var(--panel);padding:1px 5px;border-radius:2px;font-size:10px;font-family:var(--mono)}
.ai-msg.assistant pre code{background:none;padding:0}
.ai-msg.assistant strong{color:var(--accent);font-weight:700}
.ai-msg.assistant em{font-style:italic;color:var(--text)}
.ai-msg.assistant ul,.ai-msg.assistant ol{margin:6px 0;padding-left:20px}
.ai-msg.assistant li{margin:3px 0;line-height:1.5}
.ai-input-area{padding:12px;border-top:1px solid var(--border);display:flex;gap:6px}
.ai-input-area textarea{flex:1;resize:none;min-height:50px}

/* AI Side Panel */
.ai-sidepanel{width:320px;background:var(--panel);border-left:1px solid var(--border);display:flex;flex-direction:column;transition:width 0.15s ease}
.ai-sidepanel.collapsed{width:0;overflow:hidden;border:none}
.ai-toggle{position:fixed;bottom:80px;right:20px;width:44px;height:44px;border-radius:50%;background:var(--accent);color:#000;border:none;font-size:18px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.3),var(--glow-sm);z-index:100;transition:transform 0.15s ease}
.ai-toggle:hover{transform:scale(1.1)}
.ai-sidepanel-header{padding:8px 12px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;background:var(--bg)}
.ai-sidepanel-title{font-weight:700;font-size:10px;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px}
.ai-sidepanel-close{background:none;border:none;color:var(--muted);cursor:pointer;font-size:14px}
.ai-sidepanel-close:hover{color:var(--text)}
.ai-sidepanel .ai-messages{flex:1;overflow-y:auto;padding:10px;display:flex;flex-direction:column;gap:8px}
.ai-sidepanel .ai-msg{padding:8px 10px;border-radius:4px;max-width:95%;font-size:10px}
.ai-sidepanel .ai-input-area{padding:10px;border-top:1px solid var(--border);display:flex;gap:6px;flex-direction:column}
.ai-sidepanel .ai-input-area textarea{resize:none;min-height:44px;font-size:10px}

/* ===== PARSED PREVIEW ===== */
.parsed-preview{background:var(--bg);border:1px solid var(--border);padding:10px;margin-top:10px;max-height:300px;overflow:auto;border-radius:var(--radius)}
.parsed-row{display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid var(--border)}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border-light);border-radius:0}
::-webkit-scrollbar-thumb:hover{background:var(--muted)}

/* ===== QUOTE ENGINE ===== */
.quote-grid{display:grid;grid-template-columns:1fr 380px;gap:12px}
.quote-mode-toggle{display:flex;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:12px;overflow:hidden}
.quote-mode-btn{flex:1;padding:10px;text-align:center;cursor:pointer;border:none;background:transparent;color:var(--muted);font-family:inherit}
.quote-mode-btn:hover{background:var(--panel-alt)}
.quote-mode-btn.active.known{background:var(--positive);color:#000}
.quote-mode-btn.active.ai{background:var(--info);color:#000}
.quote-mode-title{font-weight:600;font-size:11px}
.quote-mode-desc{font-size:9px;opacity:0.8}
.quote-stats{display:flex;gap:16px;padding:8px 12px;background:var(--bg);border-bottom:1px solid var(--border)}
.quote-stat{display:flex;align-items:baseline;gap:4px}
.quote-stat-val{font-size:14px;font-weight:700;font-family:var(--mono)}
.quote-stat-lbl{font-size:8px;color:var(--muted);text-transform:uppercase;letter-spacing:0.3px}
.quote-table{width:100%;border-collapse:collapse;font-size:11px}
.quote-table th{padding:6px 8px;text-align:left;background:var(--bg);color:var(--muted);font-size:8px;text-transform:uppercase;letter-spacing:0.5px;border-bottom:1px solid var(--border)}
.quote-table td{padding:5px 8px;border-bottom:1px solid var(--border)}
.quote-table tr:hover{background:rgba(137,180,250,0.06)}
.quote-table input,.quote-table select{padding:4px 6px;font-size:10px;width:100%;background:var(--bg);border:1px solid var(--border);color:var(--text)}
.quote-table input:focus,.quote-table select:focus{border-color:var(--accent);outline:none;box-shadow:var(--glow-sm)}
.quote-table .col-cb{width:30px}
.quote-table .col-prod{width:120px}
.quote-table .col-origin{width:110px}
.quote-table .col-num{width:55px;text-align:right}
.quote-table .col-act{width:30px;text-align:center}
.quote-row-short{background:rgba(137,220,235,0.06)}
.quote-row-short input,.quote-row-short select{border-color:var(--info);background:rgba(137,220,235,0.08)}
.short-dot{display:inline-block;width:6px;height:6px;background:var(--info);border-radius:50%;margin-right:4px;box-shadow:0 0 4px rgba(137,220,235,0.5)}
.quote-del-btn{background:none;border:none;color:var(--negative);cursor:pointer;font-size:14px;padding:2px 6px}
.quote-del-btn:hover{background:rgba(243,139,168,0.15);border-radius:2px}
.freight-panel{background:linear-gradient(135deg,rgba(249,226,175,0.08),rgba(249,226,175,0.03));border:1px solid var(--warn);border-radius:var(--radius);padding:12px;margin-bottom:12px}
.freight-title{font-weight:600;color:var(--warn);font-size:10px;margin-bottom:8px;display:flex;align-items:center;gap:6px;text-transform:uppercase;letter-spacing:0.5px}
.freight-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.freight-group{display:flex;flex-direction:column;gap:3px;font-family:var(--mono)}
.freight-lbl{font-size:8px;color:var(--muted);text-transform:uppercase;letter-spacing:0.3px}
.lane-list{max-height:100px;overflow-y:auto;margin-top:8px;border-top:1px solid var(--border);padding-top:6px}
.lane-item{display:flex;justify-content:space-between;padding:3px 6px;font-size:10px;cursor:pointer;border-radius:var(--radius)}
.lane-item:hover{background:var(--panel)}
.lane-miles{color:var(--accent);font-weight:600;font-family:var(--mono)}
.ai-panel{border-radius:var(--radius);padding:12px;margin-bottom:12px}
.ai-panel.known-mode{background:linear-gradient(135deg,rgba(166,227,161,0.06),rgba(166,227,161,0.02));border:1px solid var(--positive)}
.ai-panel.ai-mode{background:linear-gradient(135deg,rgba(137,220,235,0.06),rgba(137,220,235,0.02));border:1px solid var(--info)}
.ai-panel-title{font-weight:600;font-size:10px;margin-bottom:6px;display:flex;align-items:center;gap:6px;text-transform:uppercase;letter-spacing:0.5px}
.ai-panel-title.known{color:var(--positive)}
.ai-panel-title.ai{color:var(--info)}
.ai-strat{display:flex;flex-wrap:wrap;gap:4px}
.ai-strat-btn{padding:5px 8px;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);font-size:9px;cursor:pointer}
.ai-strat-btn:hover{border-color:var(--accent)}
.ai-strat-btn.active{border-color:var(--info);background:rgba(137,220,235,0.1)}
.ai-insight{margin-top:8px;padding:8px;background:var(--panel);border-radius:var(--radius);font-size:10px;line-height:1.5}
.customer-list{max-height:160px;overflow-y:auto}
.customer-item{display:flex;align-items:center;gap:6px;padding:6px 8px;border-bottom:1px solid var(--border);font-size:11px}
.customer-item:hover{background:rgba(137,180,250,0.06)}
.customer-info{flex:1}
.customer-name{font-weight:500}
.customer-dest{font-size:9px;color:var(--warn)}
.customer-freight{text-align:right;font-size:10px;font-family:var(--mono)}
.customer-freight .rate{color:var(--accent);font-weight:600}
.customer-freight .miles{font-size:9px;color:var(--muted)}
.output-tabs{display:flex;gap:2px;margin-bottom:6px;overflow-x:auto}
.output-tab{padding:4px 10px;font-size:9px;background:var(--bg);border:1px solid var(--border);border-radius:var(--radius) var(--radius) 0 0;cursor:pointer;white-space:nowrap;text-transform:uppercase;letter-spacing:0.3px}
.output-tab:hover{border-color:var(--accent)}
.output-tab.active{background:var(--accent);color:#000;border-color:var(--accent)}
.output-preview{background:var(--bg);border:1px solid var(--border);border-radius:var(--radius);padding:8px;font-size:9px;max-height:250px;overflow:auto;line-height:1.4;font-family:var(--mono)}
.quote-table-output{font-family:inherit}
.quote-header{margin-bottom:6px;padding-bottom:6px;border-bottom:2px solid var(--accent)}
.quote-title{font-size:11px;font-weight:700;color:var(--accent);letter-spacing:0.5px;text-transform:uppercase}
.quote-dest{font-size:10px;color:var(--text);margin-top:2px}
.quote-output-table{width:100%;border-collapse:collapse;font-size:10px}
.quote-output-table th{text-align:left;padding:4px 8px;background:var(--bg);color:var(--muted);font-weight:500;font-size:8px;text-transform:uppercase;letter-spacing:0.5px;border-bottom:1px solid var(--border)}
.quote-output-table td{padding:5px 8px;border-bottom:1px solid var(--border)}
.quote-output-table tr:hover{background:var(--panel)}
.quote-output-table .qty{text-align:center;color:var(--muted)}
.quote-output-table .price{text-align:right;font-weight:600;color:var(--positive)}
.quote-output-table .ship{text-align:right;color:var(--info);font-size:9px}
.quote-output-table .msr-row{background:rgba(249,226,175,0.06)}
.quote-output-table .msr-row td:first-child{color:var(--warn)}
.quote-footer{margin-top:6px;padding-top:4px;border-top:1px solid var(--border);font-size:9px;color:var(--muted);text-align:center}
.quote-toolbar{display:flex;gap:6px;align-items:center;margin-bottom:10px;padding:8px;background:var(--bg);border:1px solid var(--border);border-radius:var(--radius);flex-wrap:wrap}

/* ===== TOAST NOTIFICATIONS ===== */
.toast-container{position:fixed;top:calc(var(--status-bar-height) + 8px);right:16px;z-index:9999;display:flex;flex-direction:column;gap:6px;pointer-events:none}
.toast{display:flex;align-items:center;gap:8px;padding:8px 14px;border-radius:var(--radius);transform:translateX(120%);transition:transform 200ms ease;min-width:260px;max-width:360px;pointer-events:auto;box-shadow:0 4px 12px rgba(0,0,0,0.4);font-size:11px;font-weight:600}
.toast-visible{transform:translateX(0)}
.toast-info{background:var(--info);color:#000}
.toast-positive{background:var(--positive);color:#000}
.toast-warn{background:var(--warn);color:#000}
.toast-negative{background:var(--negative);color:#fff}
.toast-icon{font-size:14px}
.toast-msg{flex:1}
.toast-close{background:none;border:none;color:inherit;opacity:0.7;cursor:pointer;font-size:14px;padding:0 4px}
.toast-close:hover{opacity:1}

/* ===== SKELETON LOADERS ===== */
.skeleton{background:linear-gradient(90deg,var(--panel-alt) 25%,var(--border) 50%,var(--panel-alt) 75%);background-size:200% 100%;animation:pulse 1.5s ease infinite;border-radius:var(--radius)}
.skeleton-text{height:12px;margin-bottom:8px}
.skeleton-text.short{width:60%}
.skeleton-kpi{height:60px}
.skeleton-table{height:200px}

/* ===== CRM KANBAN ===== */
.kanban-board{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;min-height:400px}
.kanban-column{background:var(--bg);border:1px solid var(--border);border-radius:var(--radius);padding:10px;display:flex;flex-direction:column}
.kanban-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:8px;margin-bottom:6px;border-bottom:1px solid var(--border);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}
.kanban-count{background:var(--panel-alt);padding:2px 8px;border-radius:var(--radius);font-size:10px;font-family:var(--mono)}
.kanban-cards{flex:1;display:flex;flex-direction:column;gap:6px;overflow-y:auto;min-height:100px}
.kanban-card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:10px;cursor:grab;transition:border-color 0.1s,box-shadow 0.1s}
.kanban-card:hover{border-color:rgba(137,180,250,0.3);box-shadow:0 0 8px var(--accent-glow)}
.kanban-card:active{cursor:grabbing}
.kanban-column.drag-over{background:var(--panel-alt);border-color:var(--accent)}
.kanban-card-title{font-weight:600;font-size:11px;margin-bottom:3px}
.kanban-card-sub{font-size:10px;color:var(--muted)}
.kanban-card-meta{font-size:9px;color:var(--muted);margin-top:4px;display:flex;justify-content:space-between;font-family:var(--mono)}
@media(max-width:768px){.kanban-board{grid-template-columns:1fr}}

/* ===== CRM TIMELINE ===== */
.timeline-item{display:flex;gap:12px;position:relative;padding-bottom:16px}
.timeline-line{position:absolute;left:17px;top:36px;bottom:0;width:1px;background:var(--border)}
.timeline-item:last-child .timeline-line{display:none}
.timeline-icon{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;z-index:1}
.timeline-icon-call{background:rgba(137,180,250,0.15)}
.timeline-icon-email{background:rgba(137,220,235,0.15)}
.timeline-icon-meeting{background:rgba(249,226,175,0.15)}
.timeline-icon-note{background:rgba(90,98,112,0.15)}
.timeline-content{flex:1;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:10px}
.timeline-header{display:flex;justify-content:space-between;margin-bottom:4px}
.timeline-type{font-weight:600;font-size:11px;text-transform:uppercase;letter-spacing:0.3px}
.timeline-date{font-size:10px;color:var(--muted);font-family:var(--mono)}
.timeline-notes{font-size:11px;line-height:1.5}
.timeline-products{font-size:10px;color:var(--info);margin-top:4px}
.timeline-followup{font-size:10px;color:var(--warn);margin-top:4px}

/* ===== CRM FAB ===== */
.crm-fab{position:fixed;bottom:80px;right:80px;width:48px;height:48px;border-radius:50%;background:var(--info);color:#000;border:none;font-size:20px;cursor:pointer;box-shadow:0 4px 16px rgba(137,220,235,0.3);z-index:100;transition:transform 0.15s ease;display:flex;align-items:center;justify-content:center}
.crm-fab:hover{transform:scale(1.1)}

/* ===== CONFIRM DIALOG ===== */
.confirm-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn 0.1s ease}
.confirm-dialog{background:var(--panel);border:1px solid var(--accent);padding:20px;border-radius:var(--radius);max-width:400px;text-align:center;box-shadow:0 0 20px var(--accent-glow)}
.confirm-dialog h3{margin-bottom:10px;color:var(--text);font-size:13px}
.confirm-dialog p{color:var(--muted);font-size:11px;margin-bottom:16px}
.confirm-dialog .actions{display:flex;gap:8px;justify-content:center}

/* ===== MOBILE ===== */
.mobile-header{display:none;position:fixed;top:0;left:0;right:0;height:48px;background:var(--panel);border-bottom:1px solid var(--border);z-index:100;padding:0 12px;align-items:center;justify-content:space-between}
.mobile-header .logo{background:transparent;padding:0;font-weight:700;font-size:11px;color:var(--accent);font-family:var(--mono);letter-spacing:1.5px}
.hamburger{background:none;border:none;color:var(--text);font-size:24px;cursor:pointer;padding:8px}

.mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;height:56px;background:var(--panel);border-top:1px solid var(--border);z-index:100}
.mobile-nav-items{display:flex;height:100%}
.mobile-nav-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:3px;color:var(--muted);font-size:8px;cursor:pointer;border:none;background:none;text-transform:uppercase;letter-spacing:0.3px}
.mobile-nav-item.active{color:var(--accent)}
.mobile-nav-item svg,.mobile-nav-item .nav-icon{font-size:18px}

.sidebar-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:199}
.sidebar-overlay.open{display:block}

@media(max-width:768px){
  .status-bar{display:none}
  body{overflow:auto;height:auto;min-height:100vh}
  #app{flex-direction:column;height:auto;min-height:100vh;padding-top:48px;padding-bottom:56px}
  .mobile-header{display:flex}
  .mobile-nav{display:block}
  .sidebar{position:fixed;left:-260px;top:0;bottom:0;width:260px;z-index:200;transition:left 0.2s ease}
  .sidebar.open{left:0}
  .main{width:100%;overflow:visible}
  .header{display:none}
  .content{padding:10px;overflow:visible}
  .grid-2,.grid-3,.grid-2-1,.form-grid,.quote-grid{grid-template-columns:1fr}
  .form-group.full{grid-column:span 1}
  .kpi-grid{grid-template-columns:1fr 1fr;gap:6px}
  .kpi{padding:10px}
  .kpi-value{font-size:16px}
  .table-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch}
  table{min-width:600px}
  th,td{padding:8px 10px;font-size:11px}
  .card{margin-bottom:10px}
  .card-header{padding:8px 10px;flex-wrap:wrap;gap:6px}
  .card-body{padding:10px;overflow-x:auto}
  .btn{padding:10px 14px;font-size:11px;min-height:40px}
  .btn-sm{padding:6px 10px;min-height:32px}
  select,input[type="text"],input[type="number"],input[type="date"],input[type="password"],textarea{padding:10px;font-size:14px;min-height:40px}
  .modal{width:100%;height:100%;max-height:100%;border-radius:0}
  .modal.wide{width:100%}
  .modal-body{padding:14px}
  .quote-grid{display:flex;flex-direction:column}
  .freight-panel{padding:10px}
  .output-preview{max-height:300px}
  .ai-chat{height:calc(100vh - 160px)}
  .ai-input-area{padding:10px}
  .ai-input-area textarea{min-height:44px}
  .ai-sidepanel{position:fixed;top:0;right:0;bottom:56px;width:100%;z-index:200;transition:right 0.2s ease}
  .ai-sidepanel.collapsed{right:-100%;width:100%}
  .ai-toggle{bottom:64px;right:12px}
  .action-buttons{flex-wrap:wrap}
  .header-right{flex-wrap:wrap;width:100%;justify-content:flex-start}
  .kanban-board{flex-direction:column}
  .kanban-column{flex:none;width:100%}
  .kanban-cards{max-height:300px}
  .crm-fab{bottom:64px;right:12px}
  .breadcrumbs{display:none}
}

@media(max-width:400px){
  .kpi-grid{grid-template-columns:1fr}
  .mobile-nav-item{font-size:7px}
  .content{padding:6px}
}

/* ===== QUICK ENTRY GRID ===== */
.modal.extra-wide{width:95%;max-width:1200px}
.quick-entry-table{width:100%;border-collapse:collapse;font-size:11px}
.quick-entry-table th{padding:6px;text-align:left;background:var(--bg);color:var(--muted);font-size:8px;text-transform:uppercase;letter-spacing:0.5px;border-bottom:1px solid var(--border);white-space:nowrap}
.quick-entry-table td{padding:3px 2px;border-bottom:1px solid var(--border)}
.quick-entry-table input,.quick-entry-table select{padding:5px 6px;font-size:10px;width:100%;background:var(--bg);border:1px solid var(--border);color:var(--text);font-family:inherit}
.quick-entry-table input:focus,.quick-entry-table select:focus{border-color:var(--accent);outline:none;box-shadow:var(--glow-sm)}
.quick-entry-table input::placeholder{color:var(--muted);opacity:0.7}
.quick-entry-table .col-order{width:80px}
.quick-entry-table .col-date{width:110px}
.quick-entry-table .col-mill{width:160px}
.quick-entry-table .col-origin{width:100px}
.quick-entry-table .col-region{width:80px}
.quick-entry-table .col-product{width:100px}
.quick-entry-table .col-length{width:70px}
.quick-entry-table .col-volume{width:70px}
.quick-entry-table .col-price{width:80px}
.quick-entry-table .col-actions{width:50px;text-align:center}
.quick-entry-table tr:hover{background:rgba(137,180,250,0.06)}
.qe-row-btn{background:none;border:1px solid var(--border);color:var(--muted);cursor:pointer;padding:4px 8px;font-size:11px;border-radius:var(--radius)}
.qe-row-btn:hover{background:var(--panel);color:var(--text)}
.qe-row-btn.add{color:var(--positive);border-color:var(--positive)}
.qe-row-btn.add:hover{background:rgba(166,227,161,0.08)}
.qe-row-btn.remove{color:var(--negative);border-color:var(--negative)}
.qe-row-btn.remove:hover{background:rgba(243,139,168,0.08)}
.qe-actions{display:flex;gap:8px;margin-top:12px;justify-content:space-between;align-items:center}
.qe-actions-left{display:flex;gap:6px}
.qe-status{font-size:10px;color:var(--muted)}

/* ===== P&L CALENDAR / HEATMAP ===== */
.pnl-calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:3px}
.pnl-cal-dow{text-align:center;font-size:9px;color:var(--muted);font-weight:600;padding:4px 0;text-transform:uppercase;letter-spacing:0.5px}
.pnl-cal-cell{min-height:56px;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:5px;cursor:pointer;transition:border-color 0.1s ease;position:relative}
.pnl-cal-cell:hover{border-color:rgba(137,180,250,0.3);z-index:1}
.pnl-cal-cell.empty{background:transparent;border-color:transparent;cursor:default}
.pnl-cal-cell.empty:hover{border-color:transparent}
.pnl-cal-cell.selected{border-color:var(--accent);box-shadow:var(--glow-sm)}
.pnl-cal-day{font-size:9px;color:var(--muted);margin-bottom:3px}
.pnl-cal-amt{font-family:var(--mono);font-size:11px;font-weight:600;text-align:center;margin-top:4px}
.pnl-cal-trades{font-size:9px;color:var(--muted);text-align:center;margin-top:2px;font-family:var(--mono)}
.pnl-month-nav{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:12px}
.pnl-month-nav button{background:var(--border);border:1px solid var(--border-light);color:var(--text);padding:5px 12px;border-radius:var(--radius);cursor:pointer;font-family:inherit;font-size:11px}
.pnl-month-nav button:hover{background:var(--panel-alt)}
.pnl-month-label{font-size:14px;font-weight:600;min-width:160px;text-align:center;font-family:var(--mono)}
.pnl-day-detail{margin-top:12px;animation:fadeIn 0.15s ease}

@media(max-width:768px){
  .pnl-calendar-grid{gap:2px}
  .pnl-cal-cell{min-height:40px;padding:3px}
  .pnl-cal-amt{font-size:9px}
  .pnl-cal-day{font-size:8px}
  .pnl-month-label{font-size:12px;min-width:120px}
}
@media(max-width:400px){
  .pnl-cal-cell{min-height:32px;padding:2px}
  .pnl-cal-amt{font-size:8px}
  .pnl-cal-trades{display:none}
}

/* ===== PDF EXPORT ===== */
.pdf-export-mode{background:#fff !important;color:#1a1a2e !important}
.pdf-export-mode .btn{display:none !important}
.pdf-export-mode .card{border-color:#d1d9e6 !important;background:#fff !important}
.pdf-export-mode .card-header{background:#f0f2f5 !important;border-color:#d1d9e6 !important}
.pdf-export-mode .card-title{color:#1a73e8 !important}
.pdf-export-mode .kpi{background:#fff !important;border-color:#d1d9e6 !important}
.pdf-export-mode .kpi-label{color:#6c7a8a !important}
.pdf-export-mode .pnl-cal-cell{border-color:#d1d9e6 !important}
.pdf-export-mode .pnl-cal-day,.pdf-export-mode .pnl-cal-trades{color:#6c7a8a !important}
.pdf-export-mode .pnl-month-label{color:#1a1a2e !important}
.pdf-export-mode th{background:#f0f2f5 !important;color:#6c7a8a !important;border-color:#d1d9e6 !important}
.pdf-export-mode td{border-color:#d1d9e6 !important;color:#1a1a2e !important}

/* ===== MILL INTEL STYLES ===== */

/* Drop zone */
.drop-zone{border:2px dashed var(--border);border-radius:var(--radius);padding:32px;text-align:center;cursor:pointer;transition:border-color 0.15s, background 0.15s}
.drop-zone:hover,.drop-zone.drag-over{border-color:var(--accent);background:rgba(137,180,250,0.04)}

/* Signal cards */
.signal-card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:12px;margin-bottom:8px;transition:border-color 0.1s}
.signal-card:hover{border-color:rgba(137,180,250,0.2)}
.signal-card.bullish{border-left:3px solid var(--positive)}
.signal-card.bearish{border-left:3px solid var(--negative)}
.signal-card.neutral{border-left:3px solid var(--muted)}
.signal-card.opportunity{border-left:3px solid var(--accent)}
.signal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}
.signal-name{font-weight:600;font-size:11px}
.signal-badge{font-size:9px;padding:1px 6px;border-radius:1px;font-weight:600;font-family:var(--mono);text-transform:uppercase;letter-spacing:0.3px}
.signal-badge.bullish{background:rgba(166,227,161,0.12);color:var(--positive)}
.signal-badge.bearish{background:rgba(243,139,168,0.12);color:var(--negative)}
.signal-badge.neutral{background:rgba(90,98,112,0.15);color:var(--muted)}
.signal-badge.opportunity{background:rgba(137,180,250,0.15);color:var(--accent)}
.signal-explanation{font-size:10px;color:var(--text);line-height:1.5}

/* Recommendation cards */
.rec-card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:14px;margin-bottom:10px;transition:border-color 0.1s}
.rec-card:hover{border-color:rgba(137,180,250,0.2)}
.rec-action{font-size:13px;font-weight:700;margin-bottom:3px;font-family:var(--mono)}
.rec-action.buy{color:var(--positive);text-shadow:0 0 8px rgba(166,227,161,0.2)}
.rec-action.sell{color:var(--negative);text-shadow:0 0 8px rgba(243,139,168,0.2)}
.rec-action.hold{color:var(--warn)}
.rec-product{font-size:14px;font-weight:600;color:var(--accent);margin-bottom:6px}
.rec-meta{display:flex;gap:12px;margin-bottom:6px;flex-wrap:wrap}
.rec-meta-item{font-size:10px;color:var(--muted);font-family:var(--mono)}
.rec-meta-item strong{color:var(--text)}
.rec-reasons{list-style:none;padding:0}
.rec-reasons li{font-size:10px;color:var(--text);padding:2px 0;border-bottom:1px solid var(--border)}
.rec-reasons li:last-child{border-bottom:none}

/* Matrix table */
.matrix-table td,.matrix-table th{border:1px solid var(--border);white-space:nowrap}
.matrix-table tbody tr:hover{background:rgba(137,180,250,0.08) !important}
.matrix-table tbody td{position:relative}
.matrix-table tbody td:hover{background:rgba(137,180,250,0.15) !important;outline:1px solid var(--accent)}
.matrix-table tbody td:hover::after{content:'';position:absolute;left:0;top:-2000px;width:100%;height:4000px;background:rgba(137,180,250,0.04);pointer-events:none;z-index:-1}
.matrix-table .group-start{border-left:2px solid var(--accent) !important}
.matrix-table td.empty-cell{background:var(--bg);opacity:1}
.matrix-compact td{font-size:10px !important;padding:3px 2px !important}
.matrix-compact th{font-size:9px !important;padding:4px 3px !important}
.matrix-comfortable td{font-size:12px !important;padding:6px 5px !important}
.matrix-comfortable th{font-size:10px !important;padding:6px 4px !important}
.matrix-comfortable td.mill-cell{font-size:11px !important;padding:6px 10px !important}
.matrix-ctrl{display:flex;gap:8px;margin-bottom:10px;align-items:center;flex-wrap:wrap}
.matrix-ctrl label{font-size:10px;color:var(--muted);display:flex;align-items:center;gap:4px;cursor:pointer}
.matrix-ctrl label input[type="checkbox"]{accent-color:var(--accent)}

@media print{
  .sidebar,.mobile-header,.mobile-nav,.ai-sidepanel,.ai-toggle,.header,#modal,.breadcrumbs,.status-bar{display:none !important}
  #app{display:block;height:auto}
  .main{overflow:visible}
  .content{padding:10px;overflow:visible}
}
